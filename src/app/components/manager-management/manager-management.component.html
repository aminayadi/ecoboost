<p-toast></p-toast>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
<p-blockUI [blocked]="inProgressSavingUser === true"></p-blockUI>

<p-dialog header="Add New Manager" modal="true" [(visible)]="displayNewUser" [style]="{width: '80vw',height: '30vw'}">
	<form [formGroup]="addNewUserForm" (ngSubmit)="onSubmitaddNewApplicationUserDTOForm()" class="row g-3">
		<div class="col-6">
			<label for="inputEmail4" class="form-label">Email</label>
			<input type="email" formControlName="email" class="form-control" id="inputEmail4">
		</div>

		<div class="col-6">
			<label for="inputAddress" class="form-label">FirstName</label>
			<input type="text" class="form-control" id="firstName" formControlName="firstName">
		</div>
		<div class="col-6">
			<label for="lastName" class="form-label">lastName</label>
			<input type="text" class="form-control" id="lastName" formControlName="lastName">
		</div>

		 
		<div class="col-12">
			<button type="submit" class="btn btn-primary" [disabled]="!addNewUserForm.valid"  >Save</button>
		</div>
		<div class="progress-spinnerModified" *ngIf="inProgressSavingUser === true">
			<p-progressSpinner *ngIf="inProgressSavingUser === true"></p-progressSpinner>
		</div>
	</form>
</p-dialog>

<p-table #dt1 [value]="listOfApplicationUserDTO" dataKey="id" [rows]="10" [loading]="loadingTable" editMode="row" [rowHover]="true"
	styleClass="p-datatable-gridlines" [paginator]="true" (onPage)="onPage($event)"
	[globalFilterFields]="['email','firstName','lastName' ]" responsiveLayout="scroll">
	<ng-template pTemplate="caption">
		<div class="flex justify-content-between flex-column sm:flex-row">
			<div class="container">
				<div class="row">
					<div class="col">
						<button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash"
							(click)="clear(dt1)"></button>

					</div>
					<div class="col">
						<button pButton label="New Manager" class="p-button-outlined mb-2" (click)="displayNewUser=true"
							icon="pi pi-filter-slash"></button>

					</div>

				</div>
			</div>
			<span class="p-input-icon-left mb-2">
				<i class="pi pi-search"></i>
				<input pInputText type="text" #filter (input)="dt1.filterGlobal($event.target.value, 'contains')"
					placeholder="Search Keyword" class="w-full" />
			</span>
		</div>
	</ng-template>
	<ng-template pTemplate="header">
		<tr>
			<th>
				<div class="flex justify-content-between align-items-center">
					email
					<p-columnFilter type="text" field="name" display="menu" placeholder="Search by email">
					</p-columnFilter>
				</div>
			</th>
			<th>
				<div class="flex justify-content-between align-items-center">
					firstName
					<p-columnFilter type="text" field="name" display="menu" placeholder="Search by firstName">
					</p-columnFilter>
				</div>
			</th>
			<th>
				<div class="flex justify-content-between align-items-center">
					lastName
					<p-columnFilter type="text" field="name" display="menu" placeholder="Search by LastName">
					</p-columnFilter>
				</div>
			</th>
			 
			<th>
				<div class="flex justify-content-between align-items-center">
					Edit
				 
				</div>
			</th>
			<th>
				<div class="flex justify-content-between align-items-center">
					Delete
				 
				</div>
			</th>
			<th style="width:8rem"></th>
		</tr>
	</ng-template>
	<ng-template pTemplate="body" let-admin let-editing="editing">
		<tr [pEditableRow]="admin">
			<td style="min-width: 12rem;">
				<p-cellEditor>
					<ng-template pTemplate="input">
						<input pInputText type="text" [(ngModel)]="admin.email">
					</ng-template>
					<ng-template pTemplate="output">
						{{admin.email}}
					</ng-template>
				</p-cellEditor>
			</td>
			<td style="min-width: 12rem;">
				<p-cellEditor>
					<ng-template pTemplate="input">
						<input pInputText type="text" [(ngModel)]="admin.firstName">
					</ng-template>
					<ng-template pTemplate="output">
						{{admin.firstName}}
					</ng-template>
				</p-cellEditor>
			</td> 
			<td style="min-width: 12rem;">
				<p-cellEditor>
					<ng-template pTemplate="input">
						<input pInputText type="text" [(ngModel)]="admin.lastName">
					</ng-template>
					<ng-template pTemplate="output">
						{{admin.lastName}}
					</ng-template>
				</p-cellEditor>
			</td>
		 
			<td style="text-align:center">
				<button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil"
					(click)="onRowEditInit(admin)" class="p-button-rounded p-button-text"></button>
				<button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check"
					(click)="onRowEditSave(admin)"
					class="p-button-rounded p-button-text p-button-success mr-2"></button>
				<button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
					(click)="onRowEditCancel(admin, ri)"
					class="p-button-rounded p-button-text p-button-danger"></button>
			</td>
			<td style="text-align:center">
				<button (click)="confirmDelete( admin )" pButton type="button" icon="pi pi-trash"  class="ui-button-danger"></button>
			</td>
		</tr> 
	</ng-template>
	<ng-template pTemplate="emptymessage">
		<tr>
			<td colspan="7">No customers found.</td>
		</tr>
	</ng-template>
	<ng-template pTemplate="loadingbody">
		<tr>
			<td colspan="7">Loading Super Admins data. Please wait.</td>
		</tr>
	</ng-template>
</p-table>